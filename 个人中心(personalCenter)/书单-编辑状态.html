<!DOCTYPE HTML>
<html>
<head>
<meta charset="utf-8">
<title>书单</title>
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<link href="../css/public.css" rel="stylesheet" type="text/css">
<link href="../css/header-and-footer.css" rel="stylesheet" type="text/css">
<link href="../css/bookList/e-bookList.css" rel="stylesheet" type="text/css">
<link href="../css/personalCenter/pc.css" rel="stylesheet" type="text/css">
<script src="../js/public/jQuery-v1.11.1.js"></script>

</head>
<body>
	<!--header-->
	<div class="header"> 
    	<div class="width1238pxAuto">
        	<a href="#" class="logo left"><img src="../images/header-and-footer/logo.png" width="158" height="71"></a>
            <div class="topNav left"><a href="#">精选好书</a><a href="#">发现好书</a><a href="#">好书品读</a><a href="#">新书速递</a><a href="#">出版社</a></div>
            <div class="search left"><input type="text" class="left" autocomplete="off"><a href="javascript:;" class="btn left"></a></div>
            <div class="status left"><a href="#">登录</a><span class="line left"></span><a href="#">注册</a></div>
            <a href="#" class="rzbtn left">出版社认证</a>
        </div>
    </div>
    <div class="e-container skin01">
        <div class="width1190pxAuto">
            <div class="e-header">
                <div class="e-title active">
                    <input type="text" value="那些让人拿起就放不下的诗集">
                    <div class="settings"style="display:block;">
                        <div class="left dropdown">
                            <p>
                                <span class="num">48</span>
                                <span class="arrow"></span>
                            </p>
                            <ul>
                                <li>12</li>
                                <li>14</li>
                                <li>16</li>
                                <li>18</li>
                                <li>20</li>
                                <li>22</li>
                            </ul>
                        </div>
                        <span class="color">颜色</span>
                        <span class="restore">恢复默认</span>
                        <span class="save">保存</span>
                    </div>
                </div>
                <div class="actions clearfix">
                    <span class="like">（12）</span>
                    <span>（24）</span>
                    <span class="changeSkin"></span>
                </div>
            </div>
            <div class="e-main">
                <div class="abstract">
                    <h2>- 简介 -</h2>
                    <div class="content">
                        <div class="textField active">
                            <textarea>诗歌就像是语言给人类的犒赏，遇见一首好诗，就像遇见一个久别重逢的朋友，可以开怀畅饮、促膝长谈，也可以放下疲惫，在词语间感受到幸福。这一期书单，推荐这些高分诗集，来和我们一起分享阅读诗歌的喜悦，走进诗人们的秘密花园。诗歌就像是语言给人类的犒赏，遇见一首好诗，就像遇见一个久别重逢的朋友，可以开怀畅饮、促膝长谈，也可以放下疲惫，在词语间感受到幸福这一期书单，推荐这些高分诗集，来和走进诗人们的秘密花园。</textarea>
                            <span class="count"><i>120</i>/200</span>
                        </div>
                        <div class="editTag clearfix">
                            <strong>标签:</strong>
                            <div id="parentFrame" class="left clearfix">
                                <!-- <div class="keyword o">教育研究<i class="close"></i></div>
                                <div class="keyword t">教育研究<i class="close"></i></div>
                                <div class="keyword th">教育研究<i class="close"></i></div>
                                <div class="keyword f">教育研究<i class="close"></i></div>
                                <div class="keyword fi">教育研究<i class="close"></i></div> -->
                                <input id="keyword" type="text" value="添加标签，多个标签请用空格隔开">
                            </div>
                        </div>
                    </div>
                </div>
                <div class="e-con">
                    <div class="category clearfix">
                        <span class="all">全部</span>
                        <div class="left tags clearfix">
                            
                        </div>
                        <!-- <span class="o">财经<i></i></span>
                        <span class="t">历史<i></i></span>
                        <span class="th">政治<i></i></span> -->
                        <!-- <span class="unclassify">未分类</span> -->
                        <span class="add"></span>
                    </div>
                    <div class="list">
                        <ul class="clearfix">
                            <li>
                                <div class="cover"><a href=""><img src="../imagesTemp/bookList/pic1.jpg" alt=""></a></div>
                                <p><a href="">花间集</a></p>
                                <span class="transfer"></span>
                                <span class="del"></span>
                            </li>
                            <li>
                                <div class="cover"><a href=""><img src="../imagesTemp/bookList/pic1.jpg" alt=""></a></div>
                                <p><a href="">花间集</a></p>
                            </li>
                            <li>
                                <div class="cover"><a href=""><img src="../imagesTemp/bookList/pic1.jpg" alt=""></a></div>
                                <p><a href="">花间集</a></p>
                            </li>
                            <li>
                                <div class="cover"><a href=""><img src="../imagesTemp/bookList/pic1.jpg" alt=""></a></div>
                                <p><a href="">花间集</a></p>
                            </li>
                            <li>
                                <div class="cover"><a href=""><img src="../imagesTemp/bookList/pic1.jpg" alt=""></a></div>
                                <p><a href="">花间集</a></p>
                            </li>
                            <li>
                                <div class="cover"><a href=""><img src="../imagesTemp/bookList/pic1.jpg" alt=""></a></div>
                                <p><a href="">花间集</a></p>
                            </li>
                            <li>
                                <div class="cover"><a href=""><img src="../imagesTemp/bookList/pic1.jpg" alt=""></a></div>
                                <p><a href="">花间集</a></p>
                            </li>
                            <li>
                                <div class="cover"><a href=""><img src="../imagesTemp/bookList/pic1.jpg" alt=""></a></div>
                                <p><a href="">花间集</a></p>
                            </li>
                            <li class="add">
                                <div class="cover"><img src="../images/bookList/icon32.png" alt=""></div>
                                <p><a href="">花间集</a></p>
                            </li>
                        </ul>
                    </div>
                    <div class="btnGroup clearfix">
                        <button class="left">< 返回修改</button>
                        <button class="right submit">发布</button>
                        <button class="right">预览</button>
                        <button class="right">保存</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="share">
        <span class="shareBtn" title="分享"></span>
        <div class="slideBox">
            <ul>
                <li><a href=""><img src="../images/bookList/icon18.png" alt=""></a></li>
                <li><a href=""><img src="../images/bookList/icon19.png" alt=""></a></li>
                <li><a href=""><img src="../images/bookList/icon20.png" alt=""></a></li>
            </ul>
            <span class="foldBtn"></span>
        </div>
    </div>
    <!--footer-->
    <div class="footer">
    	<div class="width1238pxAuto">
        	<p>数字出版：《中国学术期刊（光盘版）》电子杂志社有限公司</p>
            <p>京ICP证040431号 互联网出版许可证 新出网证(京)字271号 北京市公安局海淀分局 备案号11010802020460</p>
        </div>
    </div>
    <div class="mask" style="display:none"></div>
    <div class="modal modal4" style="display:none">
        <div class="modal-header">
            <a href="" class="close"></a>
            <div class="title">添加分类</div>
        </div>
        <div class="modal-body">
            <input type="text" placeholder="请输入分类名称">
        </div>	
        <div class="modal-footer">
            <a href="javascript:;" class="btn-confirm">确定</a>
            <a href="javascript:;" class="btn-cancel">取消</a>
        </div>
    </div>
    <script>
        $('.shareBtn').click(function(){
            $(this).siblings('.slideBox').stop(true).slideDown(200);
        });
        $('.share .foldBtn').click(function(){
            $(this).parent('.slideBox').stop(true).slideUp(200);
        });

        $('.e-title .settings .dropdown p').click(function(e){
            $(this).siblings('ul').stop(true).slideDown(200);
            e.stopPropagation();
        })
        $(document).click(function(){
            $('.e-title .settings .dropdown ul').stop(true).slideUp(200);
        });

        var addBtn = $('.e-con .category span.add');
        var tags = $('.e-con .category .tags');
        var colorArr=['o','t','th','f','fi'];
        var flag=true;
        var tagLength=0;
        // 添加
        addBtn.click(function(){
            if(flag==true){
                $('.mask,.modal4').show();
            }
        });

        $('.modal4 .btn-confirm').click(function(){
            var val=$.trim($('.modal4 input').val());
            if(val!=''&&val!='undefined'){
                $('.mask,.modal4').hide();
                tagLength=tags.find('span').length;
                if(tagLength==0){
                    tags.append('<span class="'+colorArr[0]+'">'+val+'<i></i></span><span class="unclassify '+colorArr[1]+'">未分类<i></i></span>')
                }else{
                    var idx=tagLength;
                    if(idx==5){idx=0;flag=false;}
                    $('.e-con .unclassify').before('<span class="'+colorArr[tagLength-1]+'">'+val+'<i></i></span>');
                    $('.e-con .unclassify').attr('class','unclassify '+colorArr[idx]);
                }
                
            }
        })
        // 删除
        $('.e-con .category').on('click','span i:not(.unclassify i)',function(){
            $(this).parent('span').remove();
            tagLength=tags.find('span').length;
            if(tagLength==1){ 
                $('.e-con .unclassify').remove();
                flag=true;
            } 

        });
        

        /*插入关键字*/
	(function(){
	var input=$("#keyword");
	var jsNode=document.getElementById("keyword");
	function CreateKeywordNode(value,i)
	{
		var keyword=document.createElement("div");
		var closeIt=document.createElement("div");
        closeIt.className="close";
        keyword.className="keyword";
        if(i==1){
            keyword.className+=" o";
        }else if(i==2){
            keyword.className+=" t";
        }else if(i==3){
            keyword.className+=" th";
        }else if(i==4){
            keyword.className+=" f";
        }else if(i==5){
            keyword.className+=" fi";
        }
		
		var text=document.createTextNode(value);
		keyword.appendChild(text);
		keyword.appendChild(closeIt);
		document.getElementById("parentFrame").insertBefore(keyword,jsNode);
		jsNode.value="";	
	}

	/*根据用户的输入是否带有空格来判断*/
	input.keyup(function(e)
	{
		var value=$(this).val();
		var useInputLength=value.length;
		
		if($.trim(value).length!=useInputLength && Boolean($.trim(value).length)){   
			var children=$(this).parent().children();
			var sumLen=0;
			var childrenLen=children.length;
			for(var i=0;i<childrenLen;i++){
				sumLen += children.eq(i).width();
			}
			if(sumLen<450){
                CreateKeywordNode(jsNode.value,i);
				$(".keyword .close").click(function(){$(this).parent().remove();});
			}
		}
	});

	input.focus(function()
	{
		if($(this).val()=="添加标签，多个标签请用空格隔开")
		{
			$(this).val("");
			$(this).css({"width":"120px"})
		}
	})
	input.blur(function()
	{
		if($(this).val()=="" && $(this).parent().children().length==1)
		{
			$(this).val("添加标签，多个标签请用空格隔开");
			$(this).css({"width":"262px"})
		}
		else
		{
			var value=$(this).val();
			var useInputLength=value.length;
			if($.trim(value).length==useInputLength && Boolean($.trim(value).length))
			{   
				var children=$(this).parent().children();
				var sumLen=0;
				var childrenLen=children.length;
				for(var i=0;i<childrenLen;i++)
				{
					sumLen += children.eq(i).width();
				}
				if(sumLen<450)
			    {
					CreateKeywordNode(jsNode.value,i);
					$(".keyword .close").click(function(){$(this).parent().remove();});
				}
			}
		}
	})
	})()	
    </script>
</body>
</html>
